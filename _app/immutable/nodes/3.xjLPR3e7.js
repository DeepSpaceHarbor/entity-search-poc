import"../chunks/DsnmJJEf.js";import"../chunks/DxtG4Upz.js";import{o as de,s as j}from"../chunks/CzjZKcAM.js";import{w as pe,x as g,y as o,z as fe,A as r,B as x,D as i,o as a,E as d,F as s,G as N,t as L,I as E,J as Y,K as me}from"../chunks/Bo1xW5pA.js";import{i as b}from"../chunks/CuXdT1TN.js";import{s as ue}from"../chunks/BEni3J3N.js";import{p as ve,C as ge,H as he,j as be,i as ye,b as xe}from"../chunks/l8SZmy-3.js";import{i as _e}from"../chunks/CCtZKNap.js";const we={companyNames:["string"],excludedCompanyNames:["string"],headcount:{min:0,max:0},industries:["string"],excludedIndustries:["string"],companyType:["partnership","public","private","nonprofit","government","self-employed"],excludedCompanyTypes:["string"],location:["string"],excludedLocations:["string"],companySpecialties:["string"]},ke=`
Your job is to parse a description of a person and identify relevant company search filters based on that description.
Consider factors such as industry, company size (headcount), company type, location, and specialties that would align with the person's profile.
Generate a JSON file that includes these company search filters. This is a json file meant to search through a database of companies.
The json template of the filters is: ${JSON.stringify(we)}.
Don't include any fields that are not in the template.
If you don't have information for a field, leave it empty or set to 0 (for numbers).
If you see information that indicates filter for a person (like job title, skills, etc.), ignore that information.
Important: For fields that specify list of values (such as companyType, etc.), use only the values provided in the template.
Don't include any explanations, only respond with the JSON file.
`;var Se=g('<span class="loading loading-xl loading-infinity"></span>'),Ce=g('<div class="flex h-[80vh] w-full items-start justify-evenly gap-3 overflow-hidden px-4"><div class="flex h-full w-1/2 flex-col items-start"><h3 class="mb-2 text-2xl text-base-content">Generated company filters</h3> <div class="h-full w-full overflow-auto rounded-2xl border-25 border-solid border-neutral shadow"><!></div></div></div> <div class="flex grow flex-col"><p class="text-base text-base-content/50"> </p></div> <button class="btn my-2.5 btn-gradient btn-neutral"><span class="icon-[arcticons--improvementroll] size-4.5 shrink-0"></span> New Query ?</button>',1),Ie=g('<div class="alert max-w-fit alert-error" role="alert">Oops! It seems there was an unexpected error. Please reload the page and try again.</div>'),Me=g('<h3 class="mb-1 text-2xl text-base-content">Loading model</h3> <div class="radial-progress border-4 border-transparent bg-neutral/10 text-neutral" role="progressbar" aria-label="Neutral Radial Progressbar"> </div> <h5 class="text-lg font-semibold text-base-content"> </h5>',1),Ne=g('<textarea class="h-full grow" placeholder="Describe your ideal customer..."></textarea>'),Re=g('<div class="flex grow flex-col"><p class="text-base text-base-content/50"> </p></div>'),Te=g('<button class="btn mt-2 ml-4 size-16 shrink-0 btn-gradient align-middle btn-accent" aria-label="Stop recording"><span class="icon-[icomoon-free--stop] size-4.5 shrink-0"></span></button>'),Je=g('<button class="btn mx-4 mt-2 size-16 shrink-0 btn-gradient align-middle btn-accent" aria-label="Start recording"><span class="icon-[tabler--microphone-filled] size-4.5 shrink-0"></span></button>'),ze=g('<h2 class="mb-4 flex items-center align-middle text-3xl text-base-content">What are we looking for today?</h2> <div class="textarea flex min-h-[10%] max-w-lg items-center"><!> <!></div> <div class="mt-4 flex w-auto items-center justify-center gap-1 align-middle"><button class="btn btn-gradient btn-primary"><span class="icon-[oui--generate] size-4.5 shrink-0"></span> Transform query into filters</button></div>',1),je=g('<div class="flex h-screen max-h-screen flex-col items-center justify-center bg-base-200"><!> <!> <!> <!></div>');function Ge(K,X){pe(X,!1);let O,R=x(!0),T=x(0),J=x(""),_=x("Marketing Agencies in NY that specialize in AI and have between 50 to 200 employees."),B=x(""),I=x(!1),p=null,n=x("initial"),z=[];const G=!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window);async function U(){try{r(n,"initial"),r(R,!0),r(T,0),r(J,"");const e=ve.model_list.find(t=>t.model_id==="Llama-3.1-8B-Instruct-q4f16_1-MLC-1k");if(!e)throw new Error("Model record not found in prebuilt app config");O=await ge(e.model_id,{initProgressCallback:t=>{r(T,Math.floor(t.progress*100)),r(J,t.text),t.progress===1&&(r(J,"Model loaded successfully! Initializing UI..."),setTimeout(()=>{r(R,!1),r(n,"initial")},3e3))},appConfig:{model_list:[e],useIndexedDBCache:!0}})}catch(e){console.error("Error creating MLCEngine:",e),r(R,!1),r(n,"error")}}async function P(e=5){if(!O?.chat)return await U();try{const t={messages:[{role:"system",content:ke},{role:"user",content:a(_)},...z],temperature:.1,stream:!1},f=(await O.chat.completions.create(t)).choices.reduce((m,l)=>m+l.message.content,""),y=ye(f);if(y)r(B,JSON.stringify(y,null,2));else{if(e===0)throw new Error("Max attempts reached. Unable to get valid JSON response.");z=[...z,{role:"assistant",content:f},{role:"user",content:"The previous response was not valid JSON. Please respond only with valid JSON following the specified template."}],P(e-1)}}catch(t){console.error("Error generating company search:",t),e===0?r(n,"error"):P(e-1)}}async function Z(e=5){try{r(n,"processing"),await P(e),r(n,"done")}catch(t){console.error("Error during runWorker:",t),r(n,"error")}}async function $(){if(G)return;r(I,!0);const e=window.SpeechRecognition||window.webkitSpeechRecognition;p=new e,p.continuous=!0,p.interimResults=!0,p.lang="en-US",p.onresult=t=>{let h="";for(let f of t.results)f.isFinal&&(h+=f[0].transcript+" ");r(_,h.trim())},p.onerror=t=>{console.error("Speech recognition error:",t.error),r(n,"error")},p.onend=async()=>{r(I,!1)},p.start()}function V(){a(I)&&p?p.stop():$()}function ee(){z=[],r(n,"initial")}de(async()=>{r(n,"initial"),await U()}),_e();var D=je(),W=i(D);{var te=e=>{var t=Se();o(e,t)};b(W,e=>{a(n)==="processing"&&e(te)})}var q=d(W,2);{var re=e=>{var t=Ce(),h=N(t),f=i(h),y=d(i(f),2),m=i(y);he(m,{get language(){return be},get code(){return a(B)}}),s(y),s(f),s(h);var l=d(h,2),c=i(l),w=i(c,!0);s(c),s(l);var k=d(l,2);L(()=>j(w,a(_))),E("click",k,()=>{ee()}),o(e,t)};b(q,e=>{a(n)==="done"&&e(re)})}var H=d(q,2);{var ae=e=>{var t=Ie();o(e,t)};b(H,e=>{a(n)==="error"&&e(ae)})}var ne=d(H,2);{var oe=e=>{var t=Y(),h=N(t);{var f=m=>{var l=Me(),c=d(N(l),2),w=i(c);s(c);var k=d(c,2),A=i(k,!0);s(k),L(()=>{ue(c,`--value:${a(T)??""};`),j(w,`${a(T)??""}%`),j(A,a(J))}),o(m,l)},y=m=>{var l=ze(),c=d(N(l),2),w=i(c);{var k=u=>{var v=Ne();me(v),xe(v,()=>a(_),S=>r(_,S)),o(u,v)},A=u=>{var v=Re(),S=i(v),F=i(S,!0);s(S),s(v),L(()=>j(F,a(_))),o(u,v)};b(w,u=>{a(I)?u(A,!1):u(k)})}var ie=d(w,2);{var se=u=>{var v=Y(),S=N(v);{var F=C=>{var M=Te();E("click",M,V),o(C,M)},ce=C=>{var M=Je();E("click",M,V),o(C,M)};b(S,C=>{a(I)?C(F):C(ce,!1)})}o(u,v)};b(ie,u=>{G||u(se)})}s(c);var Q=d(c,2),le=i(Q);s(Q),E("click",le,()=>{Z()}),o(m,l)};b(h,m=>{a(R)?m(f):m(y,!1)})}o(e,t)};b(ne,e=>{a(n)==="initial"&&e(oe)})}s(D),o(K,D),fe()}export{Ge as component};
